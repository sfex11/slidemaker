# 슬라이드 SaaS 제작 계획서

## 1. 프로젝트 개요

### 1.1 목표
기존 `svg-slide-maker` Claude Code 플러그인을 웹 기반 SaaS 서비스로 확장하여, 누구나 쉽게 아름다운 프레젠테이션 슬라이드를 생성할 수 있는 플랫폼을 구축한다.

### 1.2 핵심 가치
- **간편함**: URL, PDF, 마크다운 파일만 있으면 즉시 슬라이드 생성
- **아름다움**: 전문 디자이너 수준의 템플릿과 자동 레이아웃
- **AI 활용**: GLM-5 (Z.ai API)를 활용한 지능형 콘텐츠 변환 및 최적화
- **협업**: 팀 단위 템플릿 공유 및 슬라이드 협업 기능

---

## 2. 기존 자산 분석 (svg-slide-maker)

### 2.1 활용 가능한 자산

| 자산 | 설명 | 활용 방안 |
|------|------|----------|
| 템플릿 시스템 | CSS 변수 기반 13개 테마 변수, 라이트/다크 지원 | 그대로 활용 + 확장 |
| 슬라이드 레이아웃 | 타이틀, 콘텐츠, 비교, 카드, 타임라인, 테이블, 인용 | 프론트엔드 컴포넌트로 변환 |
| slide-tool.mjs | CLI 기반 슬라이드 조작 도구 | 백엔드 API로 래핑 |
| 애니메이션 | 타이핑, 페이드, 트랜지션 효과 | 그대로 활용 |
| 스킬 파이프라인 | source-prep → slide-writer | 백엔드 워크플로우로 변환 |

### 2.2 재작성 필요 영역

| 영역 | 기존 | SaaS용 |
|------|------|--------|
| 실행 환경 | Claude Code 플러그인 | 독립 웹 애플리케이션 |
| AI 호출 | Claude Code 내장 | GLM-5 (Z.ai API) 직접 호출 |
| 파일 저장 | 로컬 파일 시스템 | 클라우드 스토리지 (S3/R2) |
| 사용자 관리 | 없음 | 인증/권한 시스템 |

---

## 3. 기술 스택

### 3.1 프론트엔드
```
- Next.js 14 (App Router)
- React 18
- TypeScript
- Tailwind CSS
- Framer Motion (애니메이션)
- TipTap (리치 텍스트 에디터)
- React DnD (슬라이드 순서 변경)
```

### 3.2 백엔드
```
- Node.js 20 + TypeScript
- tRPC (타입 안전 API)
- Prisma (ORM)
- PostgreSQL (메인 DB)
- Redis (캐싱, 세션)
- BullMQ (작업 큐)
```

### 3.3 인프라
```
- Vercel (프론트엔드 호스팅)
- AWS / Cloudflare R2 (파일 스토리지)
- Supabase / PlanetScale (DB)
- Cloudflare Workers (엣지 함수)
```

### 3.4 외부 서비스
```
- GLM-5 / Z.ai API (콘텐츠 변환)
- Stripe (결제)
- Resend (이메일)
- Cloudflare Analytics (분석)
```

### 3.5 GLM-5 연결 설정
```typescript
// Z.ai API는 OpenAI 호환 API 제공
import OpenAI from 'openai';

const glm5Client = new OpenAI({
  apiKey: process.env.ZAI_API_KEY,
  baseURL: 'https://api.z.ai/api/coding/paas/v4',
});

// 모델 사양
// - Model ID: glm-5
// - Context Window: 204,800 토큰 (200K)
// - Max Output: 131,072 토큰 (128K)
// - 비용: 입력 $0.6/1M, 출력 $2.2/1M 토큰
```

참고: `../glm5_test.py`에서 Python 구현 예시 확인

---

## 4. 핵심 기능 명세

### 4.1 슬라이드 생성 파이프라인

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   입력      │ →  │   AI 처리   │ →  │  템플릿     │ →  │   출력      │
│   소스      │    │   변환      │    │  적용       │    │   결과      │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
   URL/PDF/          GLM-5 API          템플릿 엔진        HTML/SVG
   마크다운          마크다운화          CSS 변수           PDF/PPTX
```

### 4.2 입력 소스 지원

| 소스 타입 | 처리 방식 |
|-----------|----------|
| **URL** | 웹 스크래핑 → 본문 추출 → 마크다운 변환 |
| **PDF** | PDF 파싱 → 텍스트 추출 → 구조화 |
| **마크다운** | 직접 파싱 → 슬라이드 구조 분석 |
| **텍스트** | GLM-5로 구조화 → 슬라이드 생성 |
| **YouTube** | 자막 추출 → 요약 → 슬라이드 생성 |

### 4.3 슬라이드 타입 자동 매핑

| 콘텐츠 패턴 | 슬라이드 타입 | UI 컴포넌트 |
|-------------|---------------|-------------|
| 제목 + 부제 | 타이틀 슬라이드 | `TitleSlide` |
| 3개 항목 나열 | 3열 카드 | `CardGrid cols={3}` |
| A vs B 비교 | 2열 비교 | `ComparisonSlide` |
| 단계별 흐름 | 타임라인 | `TimelineSlide` |
| 데이터/수치 | 테이블 | `TableSlide` |
| 인용문 | 빅 쿼트 | `QuoteSlide` |
| 핵심 요약 | 리스트 | `SummarySlide` |

### 4.4 템플릿 시스템

```typescript
interface SlideTemplate {
  id: string;
  name: string;
  description: string;
  author: string;
  isPublic: boolean;
  theme: {
    light: ThemeVariables;
    dark: ThemeVariables;
  };
  fonts: {
    heading: string;
    body: string;
    mono: string;
  };
  branding: {
    logo?: string;
    watermark?: string;
    footer?: string;
  };
}

interface ThemeVariables {
  bg: string;
  surface: string;
  surface2: string;
  border: string;
  text: string;
  textDim: string;
  accent: string;
  accent2: string;
  green: string;
  greenDim: string;
  orange: string;
  teal: string;
  pink: string;
}
```

### 4.5 편집 기능

| 기능 | 설명 |
|------|------|
| 실시간 미리보기 | 편집 즉시 슬라이드 렌더링 |
| 드래그 앤 드롭 | 슬라이드 순서 변경 |
| 텍스트 편집 | 인라인 텍스트 수정 |
| 이미지 삽입 | 드래그 또는 URL로 이미지 추가 |
| 템플릿 전환 | 실시간 테마/템플릿 변경 |
| AI 재작성 | 선택 영역 AI로 개선 |

### 4.6 내보내기 형식

| 형식 | 설명 |
|------|------|
| HTML | 웹 공유용 (자체 포함) |
| PDF | 프린트/배포용 |
| PPTX | PowerPoint 호환 |
| PNG ZIP | 각 슬라이드 이미지 |
| 공유 링크 | 웹 프레젠테이션 모드 |

---

## 5. 데이터베이스 스키마

### 5.1 핵심 테이블

```prisma
model User {
  id            String    @id @default(cuid())
  email         String    @unique
  name          String?
  image         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  projects      Project[]
  templates     Template[]
  subscriptions Subscription?
}

model Project {
  id            String    @id @default(cuid())
  name          String
  description   String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  userId        String
  user          User      @relation(fields: [userId], references: [id])

  slides        Slide[]
  exports       Export[]
}

model Slide {
  id            String    @id @default(cuid())
  order         Int
  type          String    // title, content, comparison, quote, etc.
  content       Json      // 슬라이드 내용
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  projectId     String
  project       Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Template {
  id            String    @id @default(cuid())
  name          String
  description   String?
  config        Json      // 테마 변수, 폰트 등
  isPublic      Boolean   @default(false)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  authorId      String
  author        User      @relation(fields: [authorId], references: [id])
}

model Export {
  id            String    @id @default(cuid())
  format        String    // html, pdf, pptx, png
  url           String
  createdAt     DateTime  @default(now())

  projectId     String
  project       Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Subscription {
  id            String    @id @default(cuid())
  plan          String    // free, pro, team
  status        String    // active, canceled, past_due
  stripeCustomerId    String? @unique
  stripeSubscriptionId String? @unique
  currentPeriodEnd    DateTime?

  userId        String    @unique
  user          User      @relation(fields: [userId], references: [id])
}
```

---

## 6. API 설계

### 6.1 RESTful API 주요 엔드포인트

```
# 인증
POST   /api/auth/signup
POST   /api/auth/login
POST   /api/auth/logout
GET    /api/auth/session

# 프로젝트
GET    /api/projects
POST   /api/projects
GET    /api/projects/:id
PUT    /api/projects/:id
DELETE /api/projects/:id

# 슬라이드
GET    /api/projects/:id/slides
POST   /api/projects/:id/slides
PUT    /api/slides/:id
DELETE /api/slides/:id
POST   /api/slides/reorder

# AI 생성
POST   /api/generate/from-url
POST   /api/generate/from-pdf
POST   /api/generate/from-markdown
POST   /api/generate/from-text
POST   /api/slides/:id/rewrite

# 템플릿
GET    /api/templates
POST   /api/templates
GET    /api/templates/:id
PUT    /api/templates/:id
DELETE /api/templates/:id

# 내보내기
POST   /api/export/html
POST   /api/export/pdf
POST   /api/export/pptx
GET    /api/exports/:id
```

### 6.2 WebSocket 이벤트 (실시간 협업)

```typescript
// 슬라이드 편집 이벤트
interface SlideEditEvent {
  type: 'slide:update' | 'slide:create' | 'slide:delete' | 'slide:reorder';
  projectId: string;
  slideId?: string;
  payload: any;
  userId: string;
  timestamp: number;
}
```

---

## 7. 개발 단계 (로드맵)

### Phase 1: MVP (4주)
**목표: 핵심 기능 구현, 베타 테스트**

| 주차 | 작업 내용 |
|------|----------|
| 1주 | 프로젝트 설정, 인증 시스템, 기본 UI 레이아웃 |
| 2주 | 슬라이드 생성 파이프라인 (URL/마크다운), 템플릿 시스템 |
| 3주 | 슬라이드 편집기, 미리보기, 드래그 앤 드롭 |
| 4주 | HTML/PDF 내보내기, 버그 수정, 베타 배포 |

**MVP 기능:**
- [x] 이메일/소셜 로그인
- [x] URL → 슬라이드 생성
- [x] 마크다운 → 슬라이드 생성
- [x] 기본 템플릿 3개 (라이트/다크/커스텀)
- [x] 슬라이드 편집 (텍스트, 순서)
- [x] HTML/PDF 내보내기

### Phase 2: 프로 기능 (3주)
**목표: 유료 기능, 템플릿 확장**

| 주차 | 작업 내용 |
|------|----------|
| 5주 | PDF 입력 지원, AI 재작성, 프리미엄 템플릿 |
| 6주 | Stripe 결제 연동, 구독 시스템 |
| 7주 | PPTX 내보내기, 성능 최적화 |

**Phase 2 기능:**
- [ ] PDF → 슬라이드 생성
- [ ] AI 슬라이드 재작성/개선
- [ ] 프리미엄 템플릿 10개+
- [ ] PPTX 내보내기
- [ ] Pro 플랜 ($9/월)

### Phase 3: 팀 기능 (3주)
**목표: 협업, 기업용 기능**

| 주차 | 작업 내용 |
|------|----------|
| 8주 | 팀 워크스페이스, 멤버 초대, 권한 관리 |
| 9주 | 실시간 협업 편집, 댓글, 버전 히스토리 |
| 10주 | 커스텀 브랜딩, API 액세스, 관리자 대시보드 |

**Phase 3 기능:**
- [ ] 팀 워크스페이스
- [ ] 실시간 협업
- [ ] 버전 히스토리
- [ ] 커스텀 브랜딩 (로고, 컬러)
- [ ] API 액세스
- [ ] Team 플랜 ($29/월)

### Phase 4: 확장 (지속)
**목표: 고급 기능, 플랫폼화**

- [ ] YouTube → 슬라이드
- [ ] 이미지 → 슬라이드 (OCR)
- [ ] 사용자 정의 도메인
- [ ] analytics 대시보드
- [ ] Zapier/Make 연동
- [ ] 모바일 앱 (React Native)

---

## 8. 가격 정책

| 플랜 | 가격 | 기능 |
|------|------|------|
| **Free** | $0 | 월 5개 프로젝트, 기본 템플릿, HTML 내보내기 |
| **Pro** | $9/월 | 무제한 프로젝트, 모든 템플릿, 모든 내보내기, AI 재작성 100회/월 |
| **Team** | $29/월 | Pro + 팀원 5명, 협업 편집, 커스텀 브랜딩, API |
| **Enterprise** | 문의 | 무제한 팀원, SSO, SLA, 전담 지원 |

---

## 9. 기술적 고려사항

### 9.1 성능 최적화
- 슬라이드 렌더링: 가상화 (큰 덱 처리)
- 이미지: CDN + WebP 자동 변환
- API: Edge 캐싱, ISR
- 번들: 코드 스플리팅, 트리 쉐이킹

### 9.2 보안
- 인증: NextAuth.js + JWT
- 파일 업로드: 바이러스 스캔, 크기 제한
- API: Rate limiting, 입력 검증
- 데이터: 암호화 at-rest, in-transit

### 9.3 확장성
- 마이크로서비스 준비 (모놀리스 시작)
- 작업 큐로 AI 처리 분리
- DB 샤딩 준비 (PlanetScale)

### 9.4 모니터링
- 에러 추적: Sentry
- 성능: Vercel Analytics + Web Vitals
- 로그: Axiom / Logtail
- 업타임: Better Uptime

---

## 10. 성공 지표 (KPI)

| 지표 | MVP 목표 | 6개월 목표 |
|------|----------|-----------|
| 가입자 | 500명 | 10,000명 |
| 월간 활성 사용자 | 200명 | 3,000명 |
| 유료 전환율 | 3% | 5% |
| 슬라이드 생성 수 | 1,000개 | 50,000개 |
| NPS 점수 | 40+ | 60+ |
| MRR | $500 | $15,000 |

---

## 11. 리스크 및 대응

| 리스크 | 가능성 | 영향 | 대응 방안 |
|--------|--------|------|----------|
| GLM-5 API 비용 증가 | 중 | 높 | 캐싱 강화, 토큰 최적화, 다른 LLM 옵션 확보 |
| 경쟁사 등장 (Gamma 등) | 높 | 중 | 차별화된 기능, 한국어 최적화, 가격 경쟁력 |
| 슬라이드 품질 이슈 | 중 | 높 | 템플릿 품질 관리, 사용자 피드백 루프 |
| 서버 비용 급증 | 낮 | 중 | 사용량 기반 요금제, 리소스 모니터링 |

---

## 12. 다음 단계

### 즉시 시작 (이번 주)
1. Next.js 프로젝트 초기화
2. Tailwind CSS + shadcn/ui 설정
3. 인증 시스템 구현 (NextAuth.js)
4. 기본 레이아웃 구조

### MVP 완료 후
1. 베타 사용자 모집 (Product Hunt, 커뮤니티)
2. 피드백 수집 및 반영
3. 마케팅 페이지 제작
4. 정식 런칭 준비

---

*작성일: 2025-02-13*
*버전: 1.0*
